<nz-spin [nzSpinning]="isLoading">
  <div class="inner-content">
    <nz-card style="width: 100%">
      <div nz-row [nzGutter]="16">
        <div nz-col [nzSpan]="leftColumnSpan">
          <nz-card class="card">
            <div class="column" [innerHTML]="sanitizedContent"></div>
          </nz-card>
        </div>
        <div nz-col [nzSpan]="rightColumnSpan">
          <nz-card class="card">
            <!-- collapse button  -->
            <button
              nz-button
              nzType="default"
              (click)="onCollapse()"
              class="collapse-button"
            >
              <span
                nz-icon
                [nzType]="leftColumnSpan === 8 ? 'right' : 'left'"
                nzTheme="outline"
              ></span>
            </button>

            <!-- selecting configurations options -->
            <div nz-row [nzGutter]="16" style="margin-bottom: 16px">
              <div nz-col nzSpan="12">
                <custom-select
                  [placeHolder]="placeHolderForConfigurationSelect"
                  [isLoading]="isLoadingConfigurations"
                  [optionList]="configurationOptionList"
                  [selectedItem]="selectedConfiguration"
                  (onSearchChange)="onSearchConfiguration($event)"
                ></custom-select>
              </div>
              <div nz-col nzSpan="12">
                <custom-select
                  [placeHolder]="placeHolderForIcdCodeSelect"
                  [isLoading]="isLoadingIcdCodes"
                  [optionList]="icdCodeOptionList"
                  [selectedItem]="selectedConfiguration"
                  (onSearchChange)="onSearchIcdCode($event)"
                ></custom-select>
              </div>
            </div>

            <!-- table  -->
            <div class="column">
              <nz-table
                [nzData]="mappingData.dataElements"
                [nzFrontPagination]="false"
              >
                <thead>
                  <tr>
                    <th>Data element</th>
                    <th>Configurations</th>
                    <th>ICD Codes</th>
                  </tr>
                </thead>
                <tbody>
                  @for (data of mappingData.dataElements; track data) {
                  <tr>
                    <td>{{ data }}</td>
                    <td>
                      @for (config of mappingData.configurations; track config)
                      {
                      <p>{{ config }}</p>
                      }
                    </td>
                    <td>
                      @for (code of mappingData.icdCodes; track code) {
                      <p>{{ code }}</p>
                      }
                    </td>
                  </tr>
                  }
                </tbody>
              </nz-table>
            </div>
          </nz-card>
        </div>
      </div>
    </nz-card>
  </div>
</nz-spin>
