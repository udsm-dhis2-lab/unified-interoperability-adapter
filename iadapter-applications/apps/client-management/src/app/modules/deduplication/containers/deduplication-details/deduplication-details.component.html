<div style="padding: 16px">
  <nz-card style="width: 100%; margin-top: 16px; min-height: 60vh">
    <div class="client-details-container">
      <div class="profile-card">
        <h2>Profile Information</h2>
        <div class="profile-info">
          <div class="info-row">
            <label for="caseId">Case ID:</label>
            <span id="caseId" aria-label="Case ID">{{ client?.id }}</span>
          </div>
          <div class="info-row">
            <span id="fullName" aria-label="Full name">Full name: </span>
            <span>{{ client?.fullName }}</span>
          </div>
          <div class="info-row">
            <label for="sex">Sex:</label>
            <span>{{ client?.sex }}</span>
          </div>
          <div class="info-row">
            <label for="dateOfBirth">Date of birth:</label>
            <span>{{ client?.dateOfBirth }}</span>
          </div>
          <div class="info-row">
            <label for="age">Age:</label>
            <span>{{ client?.age }} Years</span>
          </div>

          <h3>Contact Information</h3>
          <div class="info-row">
            <label for="phoneNumber">Phone Number:</label>
            <span>{{ client?.contactInfo?.phoneNumber }}</span>
          </div>
          <div class="info-row">
            <label for="email">Email:</label>
            <span>{{ client?.contactInfo?.email }}</span>
          </div>
          <div class="info-row">
            <label for="permanentAddress">Permanent address:</label>
            <span>{{ client?.contactInfo?.permanentAddress }}</span>
          </div>
          <div class="info-row">
            <label for="currentAddress">Current address:</label>
            <span>{{ client?.contactInfo?.currentAddress }}</span>
          </div>

          <h3>Next of Kin</h3>
          <div class="info-row">
            <label for="fullName">Full name:</label>
            <span>{{ client?.nextOfKin?.fullName }}</span>
          </div>
          <div class="info-row">
            <label for="relationship">Relationship:</label>
            <span>{{ client?.nextOfKin?.relationship }}</span>
          </div>
          <div class="info-row">
            <label for="phoneNumber">Phone number:</label>
            <span>{{ client?.nextOfKin?.phoneNumber }}</span>
          </div>
        </div>
      </div>

      <div class="duplicates-card">
        <h2>Associated duplicates ({{ data.total }})</h2>
        <nz-table [nzData]="data.duplicates ?? []" [nzShowPagination]="false">
          <thead>
            <tr>
              <th></th>
              <th>Client ID</th>
              <!-- <th>ID Number</th> -->
              <th>Full Name</th>
              <!-- <th>Health Records</th> -->
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let duplicate of data.duplicates">
              <td>
                <label nz-checkbox>
                  <input
                    type="checkbox"
                    [checked]="
                      selected.includes(duplicate.identifiers['HCRCODE'])
                    "
                    (change)="select(duplicate.identifiers['HCRCODE'])"
                  />
                </label>
              </td>
              <td>{{ duplicate.identifiers['HCRCODE'] }}</td>
              <td>{{ duplicate.given }} {{ duplicate.family }}</td>
              <!-- <td>{{ duplicate.healthRecords }}</td> -->
              <td>
                <button nz-button nzType="text">...</button>
              </td>
            </tr>
          </tbody>
        </nz-table>

        <div class="action-buttons">
          <button nz-button nzType="default" (click)="requestMerge()">
            Request for Merge
          </button>
          <button nz-button nzType="primary" (click)="merge()">Merge</button>
        </div>
      </div>
    </div>
  </nz-card>

  <div class="alert-container">
    <nz-spin [nzSpinning]="isSubmittingMappingRequest">
      <nz-alert
        nzCloseable
        *ngIf="alert.show"
        [nzType]="
          alert.type === 'success'
            ? 'success'
            : alert.type === 'info'
            ? 'info'
            : 'error'
        "
        [nzMessage]="alert.message"
        (nzOnClose)="onCloseAlert()"
        nzShowIcon
      ></nz-alert>
    </nz-spin>
  </div>
</div>
